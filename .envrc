# direnv configuration for Tuulbelt
# Auto-loads project-specific credentials when entering directory
#
# Setup:
#   1. Install direnv: brew install direnv
#   2. Add to ~/.zshrc: eval "$(direnv hook zsh)"
#   3. Run: direnv allow .

# Load credentials from .env
if [ -f .env ]; then
  source .env

  # Export for gh CLI (GH_TOKEN takes precedence over keyring)
  export GITHUB_TOKEN
  export GH_TOKEN="$GITHUB_TOKEN"
  export GITHUB_ORG

  # Export for git operations
  export GIT_AUTHOR_NAME="$GITHUB_USERNAME"
  export GIT_AUTHOR_EMAIL="$GITHUB_EMAIL"
  export GIT_COMMITTER_NAME="$GITHUB_USERNAME"
  export GIT_COMMITTER_EMAIL="$GITHUB_EMAIL"

  # Helper function: Run gh with project credentials
  # Usage: gh-project <command>
  gh-project() {
    GH_TOKEN="$GH_TOKEN" command gh "$@"
  }

  echo "✓ Tuulbelt environment loaded: $GITHUB_USERNAME"
  echo "  Use 'gh-project' for gh commands or ensure GH_TOKEN is set"
else
  echo "⚠️  .env file not found - create from .env.example"
fi
